<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Every application requires wide variety of data structures based on your use case. Implementing every basic data structures yourself is error prone, it&rsquo;s hard to get everything right."><title>Java 11 Fundamentals: Collections</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://prophet1906.github.io/garden//icon.png><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Sans+Pro:wght@400;600;700&family=Fira+Code:wght@400;700&display=swap" rel=stylesheet><link href=https://prophet1906.github.io/garden/styles.efd5aa8bc060db79336b0e65f4ed3c7f.min.css rel=stylesheet><script src=https://prophet1906.github.io/garden/js/darkmode.46b07878b7f5d9e26ad7a3c40f8a0605.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script src=https://prophet1906.github.io/garden/js/popover.688c5dcb89a57776d7f1cbeaf6f7c44b.min.js></script>
<script>const BASE_URL="https://prophet1906.github.io/garden/",fetchData=Promise.all([fetch("https://prophet1906.github.io/garden/indices/linkIndex.ab703522665125766ac629e75d23ad49.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://prophet1906.github.io/garden/indices/contentIndex.51eeafcc0d66761798542bbdb7199e80.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),draw=()=>{const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(draw);e.textContent="",drawGraph("https://prophet1906.github.io/garden",[{"/books":"#ca1919"}],-1,!0,!0,!0),initPopover("https://prophet1906.github.io/garden",null,!0),renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})}</script><script>window.navigate=e=>window.location.href=e,draw()</script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-HXZ0Y3QQ8Q"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HXZ0Y3QQ8Q",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://prophet1906.github.io/garden/js/search.06935f6a9c1dd79aa33fe3a725067dbc.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://prophet1906.github.io/garden/>ðŸª´ Shubham's Digital Garden</a></h1><svg tabindex="0" id="search-icon" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg><div class=spacer></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Java 11 Fundamentals: Collections</h1><p class=meta>Last updated May 23, 2022</p><ul class=tags><li><a href=https://prophet1906.github.io/garden/tags/java/>Java</a></li><li><a href=https://prophet1906.github.io/garden/tags/collections/>Collections</a></li><li><a href=https://prophet1906.github.io/garden/tags/map/>Map</a></li><li><a href=https://prophet1906.github.io/garden/tags/set/>Set</a></li><li><a href=https://prophet1906.github.io/garden/tags/list/>List</a></li><li><a href=https://prophet1906.github.io/garden/tags/streams/>Streams</a></li></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#the-array-problem>The Array Problem</a></li><li><a href=#collection-design>Collection Design</a></li><li><a href=#choosing-collection>Choosing Collection</a></li><li><a href=#collection-behaviors>Collection Behaviors</a></li><li><a href=#lists>Lists</a><ol><li><a href=#arraylist>ArrayList</a></li><li><a href=#linkedlist>LinkedList</a></li><li><a href=#performance-comparison>Performance Comparison</a></li></ol></li><li><a href=#maps>Maps</a><ol><li><a href=#hashmap>HashMap</a></li><li><a href=#treemap>TreeMap</a></li><li><a href=#performance-comparison-1>Performance Comparison</a></li></ol></li><li><a href=#sets>Sets</a><ol><li><a href=#hashcode--equals-contract>HashCode / Equals Contract</a></li><li><a href=#hashset>HashSet</a></li><li><a href=#treeset>TreeSet</a></li></ol></li><li><a href=#streams>Streams</a></li><li><a href=#factory-methods>Factory Methods</a></li><li><a href=#conclusion>Conclusion</a></li></ol></nav></details></aside><p>Every application requires wide variety of data structures based on your use case. Implementing every basic data structures yourself is error prone, it&rsquo;s hard to get everything right. This is one of the reasons why java provides
<a href=https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Collection.html rel=noopener>collection</a> with jdk.</p><a href=#the-array-problem><h2 id=the-array-problem><span class=hanchor arialabel=Anchor># </span>The Array Problem</h2></a><p>Some may argue why not use array everywhere?
Yes, you can but is it worth it?</p><p>Given below are some problems associated with array:</p><ul><li>Increasing size - Adding new elements in already filled array requires creating new array and copying values from old one. Old array is left for garbage collection, resulting in memory wastage.</li><li>Homogeneous object storage - You can only store objects of same type in an array.</li><li>Deletion & Insertion - You cannot easily insert or delete elements at middle of the array.</li></ul><p>Apart from the issues above, the complexity is also very bad for frequently used operations in array.</p><table><thead><tr><th style=text-align:center>Array Operation</th><th style=text-align:center>Real Time Complexity</th><th style=text-align:center>Assumed Time Complexity</th></tr></thead><tbody><tr><td style=text-align:center>Access i-th element</td><td style=text-align:center>O($\sqrt{N}$)</td><td style=text-align:center>O(1)</td></tr><tr><td style=text-align:center>Traverse all elements</td><td style=text-align:center>O(N + $\sqrt{N}$)</td><td style=text-align:center>O(N)</td></tr><tr><td style=text-align:center>Override element at i-th index</td><td style=text-align:center>O($\sqrt{N}$)</td><td style=text-align:center>O(1)</td></tr><tr><td style=text-align:center>Insert element E</td><td style=text-align:center>O(N + $\sqrt{N}$)</td><td style=text-align:center>O(N)</td></tr><tr><td style=text-align:center>Delete element E</td><td style=text-align:center>O(N + $\sqrt{N}$)</td><td style=text-align:center>O(N)</td></tr></tbody></table><a href=#collection-design><h2 id=collection-design><span class=hanchor arialabel=Anchor># </span>Collection Design</h2></a><p><img src=/garden/Excalidraw/collections/collections.excalidraw.png title=/garden/Excalidraw/collections/collections.excalidraw.png></p><a href=#choosing-collection><h2 id=choosing-collection><span class=hanchor arialabel=Anchor># </span>Choosing Collection</h2></a><p><img src=/garden/Excalidraw/collections/which_collection.excalidraw.png title=/garden/Excalidraw/collections/which_collection.excalidraw.png></p><a href=#collection-behaviors><h2 id=collection-behaviors><span class=hanchor arialabel=Anchor># </span>Collection Behaviors</h2></a><p>Collection interface extends iterable interface which allows creating iterator object. Iterator objects can be used to loop over collections.</p><p><img src=/garden/Excalidraw/collections/iterable.excalidraw.png title=/garden/Excalidraw/collections/iterable.excalidraw.png></p><p>Sample code snippet showing iterator usage provided below:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Make a collection
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>movies</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>movies</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;Matrix&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>movies</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;Spiderman&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>movies</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;Batman&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Get iterator
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Iterator</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>it</span> <span class=o>=</span> <span class=n>movies</span><span class=o>.</span><span class=na>iterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Looping through collection
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>while</span><span class=o>(</span><span class=n>it</span><span class=o>.</span><span class=na>hasNext</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>// process collection elements
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>it</span><span class=o>.</span><span class=na>next</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><a href=#lists><h2 id=lists><span class=hanchor arialabel=Anchor># </span>Lists</h2></a><p>Lists are collection of elements having defined iteration order where each element has an index.</p><a href=#arraylist><h3 id=arraylist><span class=hanchor arialabel=Anchor># </span>ArrayList</h3></a><p>Arraylist uses dynamic array for storing objects. It is good for general purpose implementation and can be used as default implementation in most cases. Arraylist is also CPU cache sympathetic because of the way it is stored in-memory. Initial ArrayList starts with default capacity and creates a new array with double the current capacity once it is full while copies elements from old array. ArrayList grows using doubling strategy as shown in figure below.</p><p><img src=/garden/Excalidraw/collections/arraylist_doubling.excalidraw.png title=/garden/Excalidraw/collections/arraylist_doubling.excalidraw.png></p><a href=#linkedlist><h3 id=linkedlist><span class=hanchor arialabel=Anchor># </span>LinkedList</h3></a><p>LinkedList has same implementation as doubly linked list and uses pointers to traverse across the data structure. Use linkedlist when there are very frequent addition/removal of elements at start. For most cases linkedlists will have worse performance than arraylist.</p><p><img src=/garden/Excalidraw/collections/doubly-linked-list.excalidraw.png title=/garden/Excalidraw/collections/doubly-linked-list.excalidraw.png></p><a href=#performance-comparison><h3 id=performance-comparison><span class=hanchor arialabel=Anchor># </span>Performance Comparison</h3></a><table><thead><tr><th style=text-align:center></th><th style=text-align:center>get</th><th style=text-align:center>add</th><th style=text-align:center>contains</th><th style=text-align:center>next</th><th style=text-align:center>remove</th></tr></thead><tbody><tr><td style=text-align:center>ArrayList</td><td style=text-align:center>O(1)</td><td style=text-align:center>O(N), Î©(1)</td><td style=text-align:center>O(N)</td><td style=text-align:center>O(1)</td><td style=text-align:center>O(N)</td></tr><tr><td style=text-align:center>LinkedList</td><td style=text-align:center>O(N)</td><td style=text-align:center>O(1)</td><td style=text-align:center>O(N)</td><td style=text-align:center>O(1)</td><td style=text-align:center>O(N)</td></tr></tbody></table><a href=#maps><h2 id=maps><span class=hanchor arialabel=Anchor># </span>Maps</h2></a><p>Maps are collections of pairs, they have keys and values. Dictionary is a good example of map, where you find meaning of word by using word as key. In java maps, keys are unique, and the uniqueness is defined by keys equals/hashcode method. Use maps over other data structures when doing frequent lookups.</p><a href=#hashmap><h3 id=hashmap><span class=hanchor arialabel=Anchor># </span>HashMap</h3></a><p>HashMap is a good general purpose implementation for most usecases. Hashmap uses a <code>.hashcode()</code> function to generate hash values for a key. The generated hashcodes are stored in an array of buckets. Buckets are linked lists to accomodate for hash collisions. Elements are stored in <code>hash % bucket_count</code> bucket. Buckets can also be trees in some cases. Number of buckets can increase with more elements and a rehash of all keys happens during this expansion of hashmaps.</p><p><img src=/garden/Excalidraw/collections/hashmap.excalidraw.png title=/garden/Excalidraw/collections/hashmap.excalidraw.png></p><a href=#treemap><h3 id=treemap><span class=hanchor arialabel=Anchor># </span>TreeMap</h3></a><p>TreeMap defines sort order and adds functionality. You can look at subsections of map based on sort order. This can perform better for some specific usecases. Underlying implementation of TreeMap is a red/black tree(a balanced binary tree). Elements with lower value are stored on left branch of these trees & higher values are stored in right branch. The tree gets re-balanced, so it never goes longer than <strong>$\log_{2}N$</strong> in terms of depth, where N is the number of elements. In general treemaps are slower than hashmaps, because of too many pointer operations, but treemap provides the navigation and sorting functionality which is missing in hashmaps.</p><p>Following example shows world population stored in treemap, it is easy to find cities with population in specific range, max population city, min population city, etc.</p><p><img src=/garden/Excalidraw/collections/treemap.excalidraw.png title=/garden/Excalidraw/collections/treemap.excalidraw.png></p><p>JDK also has other implementations of Map as well like EnumMap, LinkedHashMap & IdentityHashMap. Read official docs to know more in-depth.</p><a href=#performance-comparison-1><h3 id=performance-comparison-1><span class=hanchor arialabel=Anchor># </span>Performance Comparison</h3></a><table><thead><tr><th style=text-align:center></th><th style=text-align:center>put</th><th style=text-align:center>get</th><th style=text-align:center>containsKey</th><th style=text-align:center>next</th></tr></thead><tbody><tr><td style=text-align:center>HashMap</td><td style=text-align:center>O(N), Î©(1)</td><td style=text-align:center>O(N), Î©(1)</td><td style=text-align:center>O(N), Î©(1)</td><td style=text-align:center>O(Capacity/N)</td></tr><tr><td style=text-align:center>TreeMap</td><td style=text-align:center>O(log(N))</td><td style=text-align:center>O(log(N))</td><td style=text-align:center>O(log(N))</td><td style=text-align:center>O(log(N))</td></tr></tbody></table><a href=#sets><h2 id=sets><span class=hanchor arialabel=Anchor># </span>Sets</h2></a><p>Sets are collections with uniqueness as fundamental property. When <code>equals</code> method on two objects return same value, they are considered equal. Sets have no two objects within them with same equals value. Implementation of <code>equals</code> may require implementing <code>hashcode</code> or <code>comparator</code>.</p><a href=#hashcode--equals-contract><h3 id=hashcode--equals-contract><span class=hanchor arialabel=Anchor># </span>HashCode / Equals Contract</h3></a><p>Many APIs within JDK have contracts between them. Contracts are assumptions being made by any class within JDK and there are obligations on your code that you need to meet in order for that class functionality to work.</p><p>Since HashMap/HashSet depend on <code>hashCode</code> to find slots in bucket and <code>equals</code> to compare if two values is equal. If a developer doesn&rsquo;t properly define this functions there is a possibility of you getting in a situation with duplicate objects within set or same object present in different buckets in hashmap. If there are 2 objects <code>object1</code> and <code>object2</code>, the hashcode/equals contract is as follows:</p><p><code>object1.equals(object2)</code> $\implies$ <code>object1.hashCode() == object2.hashCode()</code></p><p>This is one way implication, 2 different object can have same hashCode, but same objects should always have same hashCode. Violating this contract will break the functionality of your class.</p><p>This contract is important because java has 2 types of equality - reference based and value based. Reference based just needs to inherit equals from Object. Value based requires a custom equals method. For value based equality proper equals & hashcode implementation should be defined.</p><p>Java 8+ have <code>hashCode()</code> for almost all primitives. Modern IDEs can auto-generate hashCode imeplementation for you. Java 7+ also has <code>Objects.hash()</code> that generates hashcode by combining individuals fields inside an object, but this function has high performance overhead, so, avoid using it.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Arrays
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Arrays</span><span class=o>.</span><span class=na>hashCode</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Primitives (Java 8+)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Long</span><span class=o>.</span><span class=na>hashCode</span><span class=o>(</span><span class=n>longValue</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Old Primitives (&lt; Java 8)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>(</span><span class=kt>int</span><span class=o>)</span> <span class=o>(</span><span class=n>l</span> <span class=o>^</span> <span class=o>(</span><span class=n>l</span> <span class=o>&gt;&gt;&gt;</span> <span class=n>32</span><span class=o>))</span> <span class=c1>// long l
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Float</span><span class=o>.</span><span class=na>floatToIntBits</span><span class=o>(</span><span class=n>f</span><span class=o>);</span> <span class=c1>// float f
</span></span></span></code></pre></td></tr></table></div></div><a href=#hashset><h3 id=hashset><span class=hanchor arialabel=Anchor># </span>HashSet</h3></a><p>HashSet is based upon HashMap and uses the HashMap implementation. HashSet is a HashMap with bucket size of 1. HashSet is good for general purpose and should be used by default.</p><a href=#treeset><h3 id=treeset><span class=hanchor arialabel=Anchor># </span>TreeSet</h3></a><p>TreeSet is based upon TreeMap and uses the TreeMap implementation(red/black binary tree), it provides features for searching and navigation within set. TreeSet is TreeMap without any duplicate nodes in tree.</p><a href=#streams><h2 id=streams><span class=hanchor arialabel=Anchor># </span>Streams</h2></a><p><a href=https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/stream/package-summary.html rel=noopener>Streams</a> are powerful new abstractions introduced in Java 8. Stream class provides functional-style operations on stream of elements, such as map-reduce transformations on collections. I would recommend using streams to do any kind of transformation in collections instead of traditional loops. Using stream improves readability and reduces boilerplate code.</p><p>Example code snippet to show stream usage:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// find sum of weights of red widgets
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span> <span class=n>widgets</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>	<span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>b</span> <span class=o>-&gt;</span> <span class=n>b</span><span class=o>.</span><span class=na>getColor</span><span class=o>()</span> <span class=o>==</span> <span class=n>RED</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=o>.</span><span class=na>mapToInt</span><span class=o>(</span><span class=n>b</span> <span class=o>-&gt;</span> <span class=n>b</span><span class=o>.</span><span class=na>getWeight</span><span class=o>())</span>
</span></span><span class=line><span class=cl>	<span class=o>.</span><span class=na>sum</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><p>Streams are usually used with collectors. I would recommend reading
<a href=https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/stream/Collectors.html rel=noopener>Collectors</a> documentation for examples.</p><p>Example code snippet to show collector usage:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Accumulate names into a List
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>people</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>	<span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>Person</span><span class=o>::</span><span class=n>getName</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span></code></pre></td></tr></table></div></div><a href=#factory-methods><h2 id=factory-methods><span class=hanchor arialabel=Anchor># </span>Factory Methods</h2></a><p><a href=https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Collections.html rel=noopener>Collections</a> class provides many utility methods which can help prevent redundant implementation of commonly used functionality like, find min & max from list, create empty set, etc. Most factory methods are optimized for performance, as they have generic implementation details.</p><p>Having empty collections can be useful when you want to pass an empty collection as argument, or you want to return an empty collection from a function.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Empty Collections
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>emptyList</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>emptyMap</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>Set</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>set</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>emptySet</span><span class=o>();</span>
</span></span></code></pre></td></tr></table></div></div><p>Singletons are helpful when you want to create collections with single value.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Singletons
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>singletonList</span><span class=o>(</span><span class=s>&#34;one&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Mao</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>singletonMap</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=s>&#34;one&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Set</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>set</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>singleton</span><span class=o>(</span><span class=n>1</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>Collection factories allow creating collections without a lot of boilerplate code.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>List</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=s>&#34;India&#34;</span><span class=o>,</span> <span class=s>&#34;USA&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Integer</span><span class=o>&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=n>Map</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=s>&#34;Shubham&#34;</span><span class=o>,</span> <span class=n>1000</span><span class=o>,</span> <span class=s>&#34;Alex&#34;</span><span class=o>,</span> <span class=n>5000</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Integer</span><span class=o>&gt;</span> <span class=n>entries</span> <span class=o>=</span> <span class=n>Map</span><span class=o>.</span><span class=na>ofEntries</span><span class=o>(</span>
</span></span><span class=line><span class=cl>	<span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;Shubham&#34;</span><span class=o>,</span> <span class=n>1000</span><span class=o>),</span>
</span></span><span class=line><span class=cl>	<span class=n>Map</span><span class=o>.</span><span class=na>entry</span><span class=o>(</span><span class=s>&#34;Alex&#34;</span><span class=o>,</span> <span class=n>5000</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>Java 10 introduced immutable copies approach as an alternative to immutable factory methods.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Modifying names does not modify immutableNames
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Collection</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>names</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>names</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;Shubham&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>names</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;Alex&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// add/remove/updated prohibited
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>immutableNames</span> <span class=o>=</span> <span class=n>List</span><span class=o>.</span><span class=na>copyOf</span><span class=o>(</span><span class=n>names</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Integer</span><span class=o>&gt;</span> <span class=n>budget</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>budget</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;Shubham&#34;</span><span class=o>,</span> <span class=n>1000</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>budget</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;Alex&#34;</span><span class=o>,</span> <span class=n>5000</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// add/remove/updated prohibited
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Integer</span><span class=o>&gt;</span> <span class=n>immutableBudget</span> <span class=o>=</span> <span class=n>Map</span><span class=o>.</span><span class=na>copyOf</span><span class=o>(</span><span class=n>budget</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>Java 9 introduced unmodifiable views.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Modifying names is the only way to modify namesView
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>names</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>names</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;Shubham&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>names</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=s>&#34;Alex&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// add/remove/updated prohibited directly, still possible through names
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>namesView</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>unmodifiableList</span><span class=o>(</span><span class=n>names</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Integer</span><span class=o>&gt;</span> <span class=n>budget</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl><span class=n>budget</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;Shubham&#34;</span><span class=o>,</span> <span class=n>1000</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>budget</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;Alex&#34;</span><span class=o>,</span> <span class=n>5000</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// add/remove/updated prohibited, still possible through budget
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Integer</span><span class=o>&gt;</span> <span class=n>budgetView</span> <span class=o>=</span> <span class=n>Collections</span><span class=o>.</span><span class=na>unmodifiableMap</span><span class=o>(</span><span class=n>budget</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><a href=#conclusion><h2 id=conclusion><span class=hanchor arialabel=Anchor># </span>Conclusion</h2></a><p>This article should help you choose correct collection for your usecase and identify tradeoff between different collections. Don&rsquo;t forget to go through official docs for
<a href=https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Collection.html rel=noopener>Collection</a>,
<a href=https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/List.html rel=noopener>List</a>,
<a href=https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Map.html rel=noopener>Map</a>,
<a href=https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Set.html rel=noopener>Set</a> and
<a href=https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Queue.html rel=noopener>Queue</a>.</p></article><hr><div class=page-end><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/garden// data-ctx="Java 11 Fundamentals: Collections" data-src=/ class=internal-link>Shubham's Digital GardenðŸª´</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://prophet1906.github.io/garden/js/graph.0eb0c81d58a703569f31b6053242af38.js></script></div></div><div id=contact_buttons><footer><p>Made by Shubham using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2022</p><ul><li><a href=/>Home</a></li><li><a href=https://twitter.com/Shubham_null>Twitter</a></li><li><a href=https://github.com/prophet1906>Github</a></li></ul></footer></div></div></body></html>